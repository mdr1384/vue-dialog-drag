(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vueDialogDrag=e():t.vueDialogDrag=e()})(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,i){i(2);var n=i(3)(i(1),i(4),null,null);t.exports=n.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"dialog-drag",props:["id","title","options","eventCb"],data:function(){return{width:0,height:0,zIndex:0,offset:{x:0,y:0},left:0,top:0,buttonClose:!0,buttonPin:!0,dragEnabled:!0,drag:!0,touch:null,overEvent:null,centered:!1,dropEnabled:!0,dragCursor:"default",dragging:!1,clickButton:!1,pX:0,pY:0,availableOptions:["left","top","width","height","buttonPin","buttonClose","centered","dropEnabled","dragCursor","zIndex"]}},created:function(){this.setOptions(this.options)},mounted:function(){if(this.dropEnabled?(this.$el.addEventListener("dragstart",this.dragStart),this.$el.addEventListener("dragend",this.dragEnd),window.addEventListener("dragover",this.dragOver)):(document.addEventListener("mousemove",this.mouseMove,{passive:!0}),document.addEventListener("mouseup",this.mouseUp)),this.centered){var t=this;this.$nextTick(function(){t.center(),t.emit("load")})}else this.emit("load")},beforeDestroy:function(){this.dropEnabled?window.removeEventListener("dragover",this.dragOver):(document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp))},watch:{options:function(t){this.setOptions(t),t.centered&&this.center()}},computed:{dialogStyle:function(){var t={left:this.left+"px",top:this.top+"px"};return this.width&&(t.width=this.width+"px"),this.height&&(t.height=this.height+"px"),this.zIndex&&(t.zIndex=this.zIndex),this.drag&&(t["user-select"]="none",t.cursor=this.dragCursor),t}},methods:{mouseOut:function(t){!this.dragEnabled&&this.dragging&&this.move(t)},dragOver:function(t){this.dropEnabled&&(this.overEvent=t,this.emit("move"))},mouseOver:function(t){setTimeout(this.mouseMove(t),50)},close:function(){this.clickButton="close",this.emit("close")},setDrag:function(){this.dragEnabled&&(this.drag=!this.drag,this.emit("pin"))},dragStart:function(t){t.stopPropagation(),this.drag&&this.dragEnabled&&this.dropEnabled&&(t.dataTransfer.setData("text",t.target.id),this.startMove(t))},dragEnd:function(t){t.preventDefault(),this.dropEnabled&&(this.move(t),this.emit("drag-end"))},mouseDown:function(t){this.dragging||this.focus(),this.dropEnabled||(this.drag&&t.preventDefault(),this.startMove(t))},mouseMove:function(t){!this.dropEnabled&&this.dragging&&this.drag&&setTimeout(this.move(t),50)},mouseUp:function(t){t.preventDefault(),this.dropEnabled||(this.stopMove(),this.emit("dragEnd"))},touchStart:function(t){this.emit("focus"),this.startMove(t.targetTouches[0])},touchMove:function(t){this.move(t.targetTouches[0])},touchEnd:function(t){this.emit("dragEnd"),this.stopMove()},stopMove:function(){this.dragging=!1,this.pX=0,this.pY=0},emit:function(t,e){if(e=e||{id:this.id,left:this.left,top:this.top,x:this.left,y:this.top,z:this.zIndex,pinned:!this.drag,width:this.$el.clientWidth,height:this.$el.clientHeight},this.eventCb){var i=this.eventCb;i&&"function"==typeof i?e=i(e):console.warn("Error: eventCb prop must be a function")}this.$emit(t,e)},move:function(t){if(this.drag&&this.dragEnabled&&(0===t.clientX&&(t=this.overEvent),t&&t.clientX&&t.clientY)){var e=t.clientX,i=t.clientY;this.left=e+this.offset.x,this.top=i+this.offset.y,this.dragging++,this.emit("move")}},clearSelection:function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},startMove:function(t){var e=this.left-t.clientX,i=this.top-t.clientY;this.offset={x:e,y:i},this.dragging=1,this.emit("drag-start")},focus:function(t){this.drag&&this.clearSelection();var e=this;setTimeout(function(){e.clickButton||e.emit("focus")},200)},center:function(){var t=void 0,e=void 0;if("window"===this.centered&&(t=window.innerWidth,e=window.innerHeight),"viewport"===this.centered){var i=document.body;t=i.clientWidth+i.scrollLeft,e=i.clientHeight+i.scrollTop}t=t||this.$parent.$el.clientWidth,e=e||this.$parent.$el.clientHeight,this.left=t/2-this.$el.clientWidth/2,this.top=e/2-this.$el.clientHeight/2},setOptions:function(t){if(t){t.x&&(t.left=t.x),t.y&&(t.top=t.y),this.drag=!this.options.pinned&&this.drag;var e=this.availableOptions;for(var i in e)t.hasOwnProperty(e[i])&&this.$set(this,e[i],t[e[i]])}}}}},function(t,e){},function(t,e){t.exports=function(t,e,i,n){var o,s=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(o=t,s=t.default);var a="function"==typeof s?s.options:s;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),i&&(a._scopeId=i),n){var d=a.computed||(a.computed={});Object.keys(n).forEach(function(t){var e=n[t];d[t]=function(){return e}})}return{esModule:o,exports:s,options:a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-drag",class:t.drag?"":"fixed",style:t.dialogStyle,attrs:{id:t.id,draggable:t.drag},on:{mousedown:t.mouseDown,touchstart:function(e){e.preventDefault(),t.touchStart(e)},"&touchmove":function(e){t.touchMove(e)},touchend:function(e){e.stopPropagation(),t.touchEnd(e)}}},[i("div",{staticClass:"dialog-header",on:{dragstart:function(t){t.stopPropagation()}}},[i("div",{staticClass:"title"},[t._t("title",[t.title?i("span",[t._v(t._s(t.title))]):i("span",[t._v("Â ")])])],2),i("div",{staticClass:"buttons"},[t.buttonPin?i("button",{staticClass:"pin",on:{click:t.setDrag,touchstart:t.setDrag}},[t.drag?t._t("button-pin"):t._e(),t.drag?t._e():t._t("button-pinned",[t.drag?t._e():t._t("button-pin")])],2):t._e(),t.buttonClose?i("button",{staticClass:"close",on:{click:function(e){e.stopPropagation(),t.close(e)},"&touchstart":function(e){t.close(e)}}},[t._t("button-close")],2):t._e()])]),i("div",{staticClass:"dialog-body",on:{dragstart:function(t){t.stopPropagation()}}},[t._t("default",[i("div",{staticClass:"blank-body"})])],2)])},staticRenderFns:[]}},function(t,e,i){t.exports=i(0)}])});
//# sourceMappingURL=vue-dialog-drag.js.map